(function(e){function t(t){for(var a,s,c=t[0],i=t[1],l=t[2],d=0,p=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,c=1;c<r.length;c++){var i=r[c];0!==n[i]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},n={app:0},o=[];function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=i;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},9224:function(e){e.exports=JSON.parse('{"name":"downloader","version":"0.1.0","private":true,"scripts":{"serve":"SET NODE_OPTIONS=--openssl-legacy-provider && vue-cli-service serve","build":"SET NODE_OPTIONS=--openssl-legacy-provider && vue-cli-service build","lint":"SET NODE_OPTIONS=--openssl-legacy-provider && vue-cli-service lint"},"dependencies":{"@vue/composition-api":"^1.7.2","core-js":"^3.6.5","json-editor-vue":"^0.17.3","vue":"^2.6.11","vue-class-component":"^7.2.3","vue-property-decorator":"^9.1.2","vuetify":"^2.4.0"},"devDependencies":{"@babel/plugin-proposal-nullish-coalescing-operator":"^7.18.6","@babel/plugin-proposal-optional-chaining":"^7.21.0","@mdi/font":"^6.1.95","@typescript-eslint/eslint-plugin":"^4.18.0","@typescript-eslint/parser":"^4.18.0","@vue/cli-plugin-babel":"^4.5.0","@vue/cli-plugin-eslint":"^4.5.0","@vue/cli-plugin-typescript":"^4.5.0","@vue/cli-service":"^4.5.0","@vue/eslint-config-typescript":"^7.0.0","@vue/runtime-dom":"^3.5.13","eslint":"^6.7.2","eslint-plugin-prettier":"^3.3.1","eslint-plugin-vue":"^6.2.2","ky":"^0.28.5","prettier":"^2.2.1","sass":"~1.32.0","sass-loader":"^10.0.0","typeface-roboto":"^1.1.13","typescript":"4.7.4","vue-cli-plugin-vuetify":"^2.4.2","vue-template-compiler":"^2.6.11","vuetify-loader":"^1.7.0"},"eslintConfig":{"root":true,"env":{"node":true},"extends":["plugin:vue/essential","eslint:recommended","@vue/typescript/recommended"],"parserOptions":{"ecmaVersion":2020},"rules":{"quotes":["warn","single"],"semi":["warn"],"no-var":"error","no-console":"warn"}},"browserslist":["> 1%","last 2 versions","not dead"]}')},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("ac1f"),r("5319"),r("b0c0");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-app-bar",{attrs:{app:""}},[r("v-tabs",{attrs:{"fixed-tabs":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[r("v-tab",{key:"add",staticClass:"primary--text"},[r("v-icon",[e._v("mdi-plus-circle")])],1),r("v-tab",{key:"text-add",staticClass:"primary--text"},[r("v-icon",[e._v("mdi-plus-box-multiple")])],1),r("v-tab",{key:"download",staticClass:"primary--text"},[r("v-icon",[e._v("mdi-download")])],1),r("v-tab",{key:"anime-list",staticClass:"primary--text"},[r("v-icon",[e._v("mdi-format-list-text")])],1)],1)],1),r("v-main",[r("v-container",[r("v-row",{staticClass:"ma-0 mb-3",attrs:{justify:"center"}},[r("v-sheet",{staticClass:"pa-3 rounded-lg",attrs:{width:"100%","max-width":"1024"}},[r("v-text-field",{attrs:{label:"仓库地址",prefix:"https://gitee.com/",outlined:"",dense:""},on:{input:e.saveRepository},model:{value:e.repository,callback:function(t){e.repository=t},expression:"repository"}}),r("v-text-field",{attrs:{label:"仓库Token",outlined:"",dense:""},on:{input:e.saveRepositoryToken},model:{value:e.repositoryToken,callback:function(t){e.repositoryToken=t},expression:"repositoryToken"}}),r("v-text-field",{attrs:{label:"服务器地址",outlined:"",dense:""},on:{input:e.saveServer},model:{value:e.server,callback:function(t){e.server=t},expression:"server"}}),r("v-text-field",{attrs:{label:"服务器Token",outlined:"",dense:"","hide-details":""},on:{input:e.saveServerToken},model:{value:e.serverToken,callback:function(t){e.serverToken=t},expression:"serverToken"}})],1)],1),r("v-row",{staticClass:"ma-0",attrs:{justify:"center"}},[r("v-tabs-items",{staticClass:"rounded-lg pa-3",staticStyle:{"max-width":"1024px",width:"100%"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[r("v-tab-item",{key:"add"},[r("Add",{attrs:{repos:e.repos},on:{alert:e.showAlert}})],1),r("v-tab-item",{key:"text-add"},[r("TextAdd",{attrs:{repos:e.repos},on:{alert:e.showAlert}})],1),r("v-tab-item",{key:"download"},[r("Downloading",{on:{alert:e.showAlert}})],1),r("v-tab-item",{key:"anime-list"},[r("AnimeList",{on:{alert:e.showAlert}})],1)],1)],1)],1)],1),e._l(e.alerts,(function(t,a){return r("v-snackbar",{key:a,style:"margin-top: "+64*a+"px",attrs:{color:t.type,timeout:5e3,top:"",right:"",transition:"slide-x-reverse-transition"},model:{value:t.show,callback:function(r){e.$set(t,"show",r)},expression:"alert.show"}},[e._v(" "+e._s(t.text)+" ")])}))],2)},o=[],s=r("2909"),c=r("1da1"),i=r("d4ec"),l=r("bee2"),u=r("257e"),d=r("262e"),p=r("2caf"),v=r("ade3"),h=(r("96cf"),r("99af"),r("d81d"),r("7db0"),r("9ab4")),b=r("1b40"),f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-form",{on:{submit:function(e){e.preventDefault()}},model:{value:e.validate,callback:function(t){e.validate=t},expression:"validate"}},[r("v-row",{staticClass:"my-2",attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{rules:[function(e){return!!e||"*必要"}],outlined:"",dense:""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(" 下载链接"),r("span",{staticClass:"red--text"},[e._v("*")])]},proxy:!0}]),model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-select",{attrs:{items:e.repos,label:"仓库",outlined:"",dense:""},model:{value:e.repo,callback:function(t){e.repo=e._n(t)},expression:"repo"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"文件选择",outlined:"",dense:"",placeholder:"BT 专用，留空为全选文件，逗号分割，可用 - 表示连续文件序号"},model:{value:e.selections,callback:function(t){e.selections=t},expression:"selections"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"下载路径",outlined:"",dense:""},model:{value:e.dir,callback:function(t){e.dir=t},expression:"dir"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"指定文件名",outlined:"",dense:""},model:{value:e.out,callback:function(t){e.out=t},expression:"out"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-textarea",{attrs:{label:"请求头",outlined:"",dense:"","hide-details":"",placeholder:"每行一项，“请求头名: 请求头值”"},model:{value:e.headers,callback:function(t){e.headers=t},expression:"headers"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-checkbox",{attrs:{label:"使用代理下载","hide-details":""},model:{value:e.proxy,callback:function(t){e.proxy=t},expression:"proxy"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-checkbox",{attrs:{label:"自动解压压缩包","hide-details":""},model:{value:e.decompress,callback:function(t){e.decompress=t},expression:"decompress"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-checkbox",{attrs:{label:"使用 EX Cookie"},model:{value:e.exCookie,callback:function(t){e.exCookie=t},expression:"exCookie"}})],1),r("v-btn",{attrs:{disabled:!e.validate||e.sending,loading:e.sending,block:"",large:"",depressed:""},on:{click:function(t){return t.stopPropagation(),e.sendToDownload.apply(null,arguments)}}},[e._v(" 发送下载 ")])],1)],1)},m=[],g=(r("1276"),r("498a"),r("d3b7"),r("3ca3"),r("ddb0"),r("9861"),r("a15b"),r("a630"),r("f6d6"),r("5cc6"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),r("dfd0")),x={requestSender:function(){var e=localStorage.getItem("server")||"",t=localStorage.getItem("serverToken")||"";return g["a"].extend({prefixUrl:e,headers:{Authorization:"token ".concat(t)}})},sendToDownload:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.requestSender().post("task",{json:e,searchParams:{action:"add"}});case 2:case"end":return r.stop()}}),r)})))()},sendToRemove:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.requestSender().post("task",{json:{gid:e},searchParams:{action:"remove"}});case 2:case"end":return r.stop()}}),r)})))()},sendToClear:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.requestSender().post("task",{json:{gid:e},searchParams:{action:"clear"}});case 2:case"end":return r.stop()}}),r)})))()},giteeFetch:function(e,t){var r=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var n,o,s,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t||localStorage.getItem("repository")||"",o=localStorage.getItem("repositoryToken")||"",a.next=4,g["a"].get("repos/".concat(n,"/contents/").concat(e),{prefixUrl:"https://gitee.com/api/v5",searchParams:{access_token:o}}).json();case 4:return s=a.sent,c=s.content,a.abrupt("return",r.decodeToUTF8(c));case 7:case"end":return a.stop()}}),a)})))()},giteeFetchWithSha:function(e,t){var r=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var n,o,s,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=localStorage.getItem("repositoryToken")||"",a.next=3,g["a"].get("repos/".concat(t,"/contents/").concat(e),{prefixUrl:"https://gitee.com/api/v5",searchParams:{access_token:n}}).json();case 3:return o=a.sent,s=o.content,c=o.sha,a.abrupt("return",{content:r.decodeToUTF8(s),sha:c});case 7:case"end":return a.stop()}}),a)})))()},giteePut:function(e,t,r,a){return Object(c["a"])(regeneratorRuntime.mark((function n(){var o,s,c,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=localStorage.getItem("repositoryToken")||"",s=new URLSearchParams,s.set("access_token",o),s.set("content",btoa(Array.from((new TextEncoder).encode(r),(function(e){return String.fromCodePoint(e)})).join(""))),s.set("sha",a),s.set("message","更新".concat(e)),n.next=8,g["a"].put("repos/".concat(t,"/contents/").concat(e),{prefixUrl:"https://gitee.com/api/v5",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s}).json();case 8:return c=n.sent,i=c.content,n.abrupt("return",{sha:i.sha});case 11:case"end":return n.stop()}}),n)})))()},decodeToUTF8:function(e){for(var t=atob(e),r=t.length,a=new Uint8Array(r),n=0;n<r;n++)a[n]=t.charCodeAt(n);var o=new TextDecoder;return o.decode(a)},getDownloadingList:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.requestSender().get("downloading").json();case 2:return r=t.sent,a=r.result,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))()}},k=function(e){Object(d["a"])(r,e);var t=Object(p["a"])(r);function r(){var e;Object(i["a"])(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),Object(v["a"])(Object(u["a"])(e),"repos",void 0),Object(v["a"])(Object(u["a"])(e),"validate",!1),Object(v["a"])(Object(u["a"])(e),"repo",""),Object(v["a"])(Object(u["a"])(e),"url",""),Object(v["a"])(Object(u["a"])(e),"selections",""),Object(v["a"])(Object(u["a"])(e),"dir",""),Object(v["a"])(Object(u["a"])(e),"out",""),Object(v["a"])(Object(u["a"])(e),"headers",""),Object(v["a"])(Object(u["a"])(e),"proxy",!1),Object(v["a"])(Object(u["a"])(e),"decompress",!1),Object(v["a"])(Object(u["a"])(e),"exCookie",!1),Object(v["a"])(Object(u["a"])(e),"sending",!1),e}return Object(l["a"])(r,[{key:"alert",value:function(e,t,r){}},{key:"sendToDownload",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.sending=!0,e.prev=1,t={url:this.url},"number"===typeof this.repo&&(t.repo=this.repo),this.selections&&(t.selections=this.selections),this.dir&&(t.dir=this.dir),this.out&&(t.out=this.out),this.proxy&&(t.proxy=this.proxy),this.decompress&&(t.decompress=this.decompress),this.headers&&(t.header=this.headers.split("\n").map((function(e){return e.trim()}))),!this.exCookie){e.next=16;break}return e.next=13,x.giteeFetch("ex_cookie.txt");case 13:r=e.sent,t.header?t.header.push(r.trim()):t.header=[r.trim()],this.alert("获取 EX Cookie 信息成功","success");case 16:return e.next=18,x.sendToDownload(t);case 18:this.alert("发送成功","success"),e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](1),this.alert("".concat(e.t0),"error",e.t0);case 24:this.sending=!1;case 25:case"end":return e.stop()}}),e,this,[[1,21]])})));function t(){return e.apply(this,arguments)}return t}()}]),r}(b["e"]);Object(h["a"])([Object(b["b"])()],k.prototype,"alert",null),Object(h["a"])([Object(b["c"])(Array)],k.prototype,"repos",void 0),k=Object(h["a"])([b["a"]],k);var j=k,O=j,y=r("2877"),w=r("6544"),T=r.n(w),_=r("8336"),S=r("ac7c"),C=r("62ad"),V=r("4bd4"),R=r("0fd9"),P=r("b974"),L=r("8654"),I=r("a844"),A=Object(y["a"])(O,f,m,!1,null,null,null),F=A.exports;T()(A,{VBtn:_["a"],VCheckbox:S["a"],VCol:C["a"],VForm:V["a"],VRow:R["a"],VSelect:P["a"],VTextField:L["a"],VTextarea:I["a"]});var N=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-form",{on:{submit:function(e){e.preventDefault()}},model:{value:e.validate,callback:function(t){e.validate=t},expression:"validate"}},[r("v-row",{staticClass:"my-2",attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("v-textarea",{attrs:{rules:[function(e){return!!e||"*必要"}],outlined:"",dense:""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(" Aria2下载文本"),r("span",{staticClass:"red--text"},[e._v("*")])]},proxy:!0}]),model:{value:e.aria2,callback:function(t){e.aria2=t},expression:"aria2"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-select",{attrs:{items:e.repos,label:"仓库",outlined:"",dense:""},model:{value:e.repo,callback:function(t){e.repo=e._n(t)},expression:"repo"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-checkbox",{attrs:{label:"使用代理下载","hide-details":""},model:{value:e.proxy,callback:function(t){e.proxy=t},expression:"proxy"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-checkbox",{attrs:{label:"自动解压压缩包","hide-details":""},model:{value:e.decompress,callback:function(t){e.decompress=t},expression:"decompress"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-checkbox",{attrs:{label:"使用 EX Cookie"},model:{value:e.exCookie,callback:function(t){e.exCookie=t},expression:"exCookie"}})],1),r("v-btn",{attrs:{disabled:!e.validate||e.sending,loading:e.sending,block:"",large:"",depressed:""},on:{click:function(t){return t.stopPropagation(),e.sendToDownload.apply(null,arguments)}}},[e._v(" 发送下载 ")])],1)],1)},D=[],E=r("3835"),M=r("b85c"),B=(r("466d"),r("159b"),function(e){Object(d["a"])(r,e);var t=Object(p["a"])(r);function r(){var e;Object(i["a"])(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),Object(v["a"])(Object(u["a"])(e),"repos",void 0),Object(v["a"])(Object(u["a"])(e),"validate",!1),Object(v["a"])(Object(u["a"])(e),"repo",""),Object(v["a"])(Object(u["a"])(e),"aria2",""),Object(v["a"])(Object(u["a"])(e),"proxy",!1),Object(v["a"])(Object(u["a"])(e),"decompress",!1),Object(v["a"])(Object(u["a"])(e),"exCookie",!1),Object(v["a"])(Object(u["a"])(e),"sending",!1),e}return Object(l["a"])(r,[{key:"alert",value:function(e,t,r){}},{key:"parseText",value:function(){var e,t=this.aria2.split("\n"),r=[],a=Object(M["a"])(t);try{for(a.s();!(e=a.n()).done;){var n=e.value;if(" "!==n[0])r.push({url:n});else{var o=n.trim().match(/([^=]*)=(.*)/)||[],s=Object(E["a"])(o,3),c=s[1],i=s[2],l=r[r.length-1];switch(c){case"selections":case"dir":case"out":l[c]=i;break;case"header":l.header?l.header.push(i):l.header=[i];break}}}}catch(u){a.e(u)}finally{a.f()}return r}},{key:"sendToDownload",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.sending=!0,e.prev=1,t=this.parseText(),r="",!this.exCookie){e.next=8;break}return e.next=7,x.giteeFetch("ex_cookie.txt");case 7:r=e.sent;case 8:return t.forEach((function(e){"number"===typeof a.repo&&(e.repo=a.repo),a.proxy&&(e.proxy=a.proxy),a.decompress&&(e.decompress=a.decompress),a.exCookie&&(e.header?e.header.push(r.trim()):e.header=[r.trim()],a.alert("获取 EX Cookie 信息成功","success"))})),e.next=11,x.sendToDownload(t);case 11:this.alert("发送成功","success"),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](1),this.alert("".concat(e.t0),"error",e.t0);case 17:this.sending=!1;case 18:case"end":return e.stop()}}),e,this,[[1,14]])})));function t(){return e.apply(this,arguments)}return t}()}]),r}(b["e"]));Object(h["a"])([Object(b["b"])()],B.prototype,"alert",null),Object(h["a"])([Object(b["c"])(Array)],B.prototype,"repos",void 0),B=Object(h["a"])([b["a"]],B);var $=B,J=$,U=Object(y["a"])(J,N,D,!1,null,null,null),z=U.exports;T()(U,{VBtn:_["a"],VCheckbox:S["a"],VCol:C["a"],VForm:V["a"],VRow:R["a"],VSelect:P["a"],VTextarea:I["a"]});var q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",{staticClass:"my-2",attrs:{dense:""}},[r("v-col",{attrs:{cols:"12"}},[r("v-row",{staticClass:"mx-0",attrs:{justify:"space-between"}},[r("v-subheader",{staticClass:"px-0"},[e._v("服务器连接状态："),r("v-chip",{attrs:{label:"","x-small":"",color:null===e.connected?"":e.connected?"success":"error"}},[e._v(e._s(null===e.connected?"初始化":e.connected?"成功":"失败"))])],1),r("v-subheader",{staticClass:"px-0"},[e._v("更新时间："),r("v-chip",{attrs:{label:"","x-small":""}},[e._v(e._s(null===e.connected?"初始化":e.fetchTime))])],1)],1)],1),e._l(e.info,(function(t){return r("v-col",{key:t.name,attrs:{cols:"12"}},[r("v-badge",{staticStyle:{width:"100%"},attrs:{color:"transparent",bottom:"",overlap:"",bordered:"",avatar:""},scopedSlots:e._u([{key:"badge",fn:function(){return["active"===t.status||"error"===t.status||"removed"===t.status?r("v-btn",{staticStyle:{"z-index":"1"},attrs:{color:"grey darken-3",fab:"",depressed:"","x-small":"",width:20,height:20},on:{click:function(r){r.stopPropagation(),"active"===t.status?e.removeTask(t.gid):e.clearTask(t.gid)}}},[r("v-icon",{attrs:{"x-small":""}},[e._v(e._s("active"===t.status?"mdi-stop":"mdi-close"))])],1):e._e()]},proxy:!0}],null,!0)},[r("v-card",{staticClass:"px-2 pt-1 pb-2",attrs:{outlined:"",title:t.name}},[r("v-row",{staticClass:"ma-0"},[r("div",{staticClass:"text-subtitle-1 text-truncate"},[e._v(e._s(t.name))])]),r("v-row",{staticClass:"ma-0",attrs:{justify:"space-between"}},[r("div",{staticClass:"text-caption"},[e._v(" "+e._s(e._f("sizeParser")(t.completedLength))+"/"+e._s(e._f("sizeParser")(t.totalLength))+" "+e._s(e._f("remainTimeParser")(t))+" ")]),"active"===t.status?r("div",{staticClass:"text-caption"},[e._v(" ("+e._s(t.numSeeders)+e._s(Number.isNaN(Number(t.numSeeders))?"":"/")+e._s(t.connections)+") "+e._s(e._f("sizeParser")(t.downloadSpeed))+"/s ")]):r("div",{staticClass:"text-caption"},[e._v(" "+e._s(e._f("statusParser")(t.status))+" ")])]),r("v-row",{staticClass:"ma-0"},[r("v-progress-linear",{attrs:{height:"20",value:e._f("progressParser")(t)}},[r("div",{staticClass:"text-caption"},[e._v(e._s(e._f("progressParser")(t))+"%")])])],1)],1)],1)],1)}))],2)},X=[],G=(r("fb6a"),r("a9e3"),r("b680"),function(e){Object(d["a"])(r,e);var t=Object(p["a"])(r);function r(){var e;Object(i["a"])(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),Object(v["a"])(Object(u["a"])(e),"info",[]),Object(v["a"])(Object(u["a"])(e),"connected",null),Object(v["a"])(Object(u["a"])(e),"fetchTime",""),e}return Object(l["a"])(r,[{key:"alert",value:function(e,t,r){}},{key:"created",value:function(){this.updateDownloadInfo()}},{key:"updateDownloadInfo",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.getDownloadingList();case 3:t=e.sent,this.connected=!0,t&&(this.info.length=0,(r=this.info).push.apply(r,Object(s["a"])(t))),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.connected=!1;case 11:return this.updateFetchTime(),e.next=14,new Promise((function(e){return setTimeout(e,5e3)}));case 14:this.updateDownloadInfo();case 15:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateFetchTime",value:function(){var e=new Date,t=e.getFullYear(),r=e.getMonth()+1,a=e.getDate(),n="0".concat(e.getHours()).slice(-2),o="0".concat(e.getMinutes()).slice(-2),s="0".concat(e.getSeconds()).slice(-2);this.fetchTime="".concat(t,"/").concat(r,"/").concat(a," ").concat(n,":").concat(o,":").concat(s)}},{key:"removeTask",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.sendToRemove(t);case 3:this.alert("发送删除命令成功","success"),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.alert("发送删除命令失败","error",e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"clearTask",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.sendToClear(t);case 3:this.alert("发送清除命令成功","success"),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.alert("发送清除命令失败","error",e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(b["e"]));Object(h["a"])([Object(b["b"])()],G.prototype,"alert",null),G=Object(h["a"])([Object(b["a"])({filters:{progressParser:function(e){var t=Number(e.totalLength),r=Number(e.completedLength),a=0;return t>0&&r>=0&&(a=r/t*100),Math.floor(100*a)/100},sizeParser:function(e){var t,r=null!==(t=Number(e))&&void 0!==t?t:0;return r<1024?"".concat(r.toFixed(2),"B"):r<Math.pow(1024,2)?"".concat((r/1024).toFixed(2),"KB"):r<Math.pow(1024,3)?"".concat((r/Math.pow(1024,2)).toFixed(2),"MB"):r<Math.pow(1024,4)?"".concat((r/Math.pow(1024,3)).toFixed(2),"GB"):void 0},statusParser:function(e){switch(e){case"active":return"下载中";case"waiting":return"等待中";case"paused":return"暂停";case"error":return"出错";case"complete":return"下载完成";case"removed":return"已删除"}},remainTimeParser:function(e){if("active"!==e.status)return"";var t=Number(e.totalLength),r=Number(e.completedLength),a=Number(e.downloadSpeed),n=0;t>0&&a>0&&r>=0&&(n=Math.ceil((t-r)/a));var o=0,s=0,c=0;return 0===n?"":(n<60?o=n:n<3600?(s=Math.floor(n/60),o=n-60*s):(c=Math.floor(n/60/60),s=Math.floor((n-60*c*60)/60),o=n-60*c*60-60*s),"(".concat("0".concat(c).slice(-2),":").concat("0".concat(s).slice(-2),":").concat("0".concat(o).slice(-2),")"))}}})],G);var H=G,W=H,K=r("4ca6"),Y=r("b0af"),Q=r("cc20"),Z=r("132d"),ee=r("8e36"),te=r("e0c7"),re=Object(y["a"])(W,q,X,!1,null,null,null),ae=re.exports;T()(re,{VBadge:K["a"],VBtn:_["a"],VCard:Y["a"],VChip:Q["a"],VCol:C["a"],VIcon:Z["a"],VProgressLinear:ee["a"],VRow:R["a"],VSubheader:te["a"]});var ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",{staticClass:"my-2"},[r("v-col",{attrs:{cols:"5"}},[r("v-btn",{attrs:{block:"",large:"",depressed:"",disabled:e.loading},on:{click:function(t){return t.stopPropagation(),e.loadList("sources")}}},[e._v(" 源列表 ")])],1),r("v-col",{attrs:{cols:"5"}},[r("v-btn",{attrs:{block:"",large:"",depressed:"",disabled:e.loading},on:{click:function(t){return t.stopPropagation(),e.loadList("downloaded")}}},[e._v(" 下载列表 ")])],1),r("v-col",{attrs:{cols:"1"}},[r("v-btn",{attrs:{block:"",large:"",depressed:""},on:{click:function(t){return t.stopPropagation(),e.refreshList(e.editing)}}},[r("v-icon",[e._v("mdi-refresh")])],1)],1),r("v-col",{attrs:{cols:"1"}},[r("v-btn",{attrs:{block:"",large:"",depressed:""},on:{click:function(t){return t.stopPropagation(),e.expandTo(5)}}},[r("v-icon",[e._v("mdi-numeric-5-box-multiple-outline")])],1)],1),r("v-col",{staticClass:"jse-theme-dark",attrs:{cols:"12"}},[r("JsonEditorVue",{ref:"editor",model:{value:e.list,callback:function(t){e.list=t},expression:"list"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-btn",{attrs:{disabled:e.sending,loading:e.sending,block:"",large:"",depressed:""},on:{click:function(t){return t.stopPropagation(),e.save()}}},[e._v(" 保存 ")])],1)],1)},oe=[],se=r("ed09"),ce=r("5da5");b["e"].use(se["default"]);var ie=function(e){Object(d["a"])(r,e);var t=Object(p["a"])(r);function r(){var e;Object(i["a"])(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),Object(v["a"])(Object(u["a"])(e),"editor",void 0),Object(v["a"])(Object(u["a"])(e),"sending",!1),Object(v["a"])(Object(u["a"])(e),"list",[]),Object(v["a"])(Object(u["a"])(e),"sourceList",""),Object(v["a"])(Object(u["a"])(e),"sourceListSha",""),Object(v["a"])(Object(u["a"])(e),"downloadedList",""),Object(v["a"])(Object(u["a"])(e),"downloadedListSha",""),Object(v["a"])(Object(u["a"])(e),"editing","sources"),Object(v["a"])(Object(u["a"])(e),"loading",!1),Object(v["a"])(Object(u["a"])(e),"listInfo",{sources:"",downloaded:"",repo:""}),e}return Object(l["a"])(r,[{key:"alert",value:function(e,t,r){}},{key:"mounted",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.refreshList();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"refreshList",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,o,s,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:"sources",this.loading=!0,e.prev=2,e.t0=JSON,e.next=6,x.giteeFetch("list.json");case 6:if(e.t1=e.sent,r=e.t0.parse.call(e.t0,e.t1),!r){e.next=26;break}return this.listInfo=r,e.next=12,x.giteeFetchWithSha(r.sources,r.repo);case 12:return a=e.sent,n=a.content,o=a.sha,this.sourceList=n,this.sourceListSha=o,e.next=19,x.giteeFetchWithSha(r.downloaded,r.repo);case 19:s=e.sent,n=s.content,o=s.sha,this.downloadedList=n,this.downloadedListSha=o,e.next=27;break;case 26:throw new Error("获取列表信息失败");case 27:this.loadList(t),e.next=33;break;case 30:e.prev=30,e.t2=e["catch"](2),this.alert("获取列表失败","error",e.t2);case 33:this.loading=!1;case 34:case"end":return e.stop()}}),e,this,[[2,30]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadList",value:function(e){var t=this;"sources"===e?(this.list=JSON.parse(this.sourceList),this.editing="sources"):(this.list=JSON.parse(this.downloadedList),this.editing="downloaded"),setTimeout((function(){t.expandTo(5)}),300)}},{key:"expandTo",value:function(e){this.editor.jsonEditor.collapse([],(function(){return!0})),this.editor.jsonEditor.expand([],(function(t){return t.length<e}))}},{key:"save",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.sending=!0,e.prev=1,e.next=4,x.giteePut(this.listInfo[this.editing],this.listInfo.repo,JSON.stringify(this.list,null,2),"sources"===this.editing?this.sourceListSha:this.downloadedListSha);case 4:t=e.sent,r=t.sha,"sources"===this.editing?this.sourceListSha=r:this.downloadedListSha=r,this.alert("保存成功","success"),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),this.alert("".concat(e.t0),"error",e.t0);case 13:this.sending=!1;case 14:case"end":return e.stop()}}),e,this,[[1,10]])})));function t(){return e.apply(this,arguments)}return t}()}]),r}(b["e"]);Object(h["a"])([Object(b["b"])()],ie.prototype,"alert",null),Object(h["a"])([Object(b["d"])("editor")],ie.prototype,"editor",void 0),ie=Object(h["a"])([Object(b["a"])({components:{JsonEditorVue:ce["a"]}})],ie);var le=ie,ue=le,de=Object(y["a"])(ue,ne,oe,!1,null,null,null),pe=de.exports;T()(de,{VBtn:_["a"],VCol:C["a"],VIcon:Z["a"],VRow:R["a"]});var ve=function(e){Object(d["a"])(r,e);var t=Object(p["a"])(r);function r(){var e;Object(i["a"])(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),Object(v["a"])(Object(u["a"])(e),"tab","add"),Object(v["a"])(Object(u["a"])(e),"repos",[]),Object(v["a"])(Object(u["a"])(e),"repository",""),Object(v["a"])(Object(u["a"])(e),"repositoryToken",""),Object(v["a"])(Object(u["a"])(e),"server",""),Object(v["a"])(Object(u["a"])(e),"serverToken",""),Object(v["a"])(Object(u["a"])(e),"alerts",[]),e}return Object(l["a"])(r,[{key:"mounted",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.repository=localStorage.getItem("repository")||"",this.repositoryToken=localStorage.getItem("repositoryToken")||"",this.server=localStorage.getItem("server")||"",this.serverToken=localStorage.getItem("serverToken")||"",!this.repository||!this.repositoryToken){e.next=24;break}return e.prev=5,e.next=8,x.giteeFetch("public_url.txt");case 8:return r=e.sent,e.next=11,x.giteeFetch("token.txt");case 11:return a=e.sent,e.t0=JSON,e.next=15,x.giteeFetch("repo.json");case 15:e.t1=e.sent,n=e.t0.parse.call(e.t0,e.t1),(t=this.repos).push.apply(t,Object(s["a"])(n.map((function(e,t){return{text:e,value:t}})))),this.server===r&&this.serverToken===a||(this.server=r,this.saveServer(r),this.serverToken=a,this.saveServerToken(a),this.showAlert("从Gitee更新服务器信息成功","success")),e.next=24;break;case 21:e.prev=21,e.t2=e["catch"](5),this.showAlert("从Gitee获取服务器信息失败","error",e.t2);case 24:case"end":return e.stop()}}),e,this,[[5,21]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"saveRepository",value:function(e){localStorage.setItem("repository",e)}},{key:"saveRepositoryToken",value:function(e){localStorage.setItem("repositoryToken",e)}},{key:"saveServer",value:function(e){localStorage.setItem("server",e)}},{key:"saveServerToken",value:function(e){localStorage.setItem("serverToken",e)}},{key:"showAlert",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,n=this.alerts.find((function(e){return!1===e.show&&!0===e.shown})),o={show:!1,text:e,type:r,shown:!1};(n?(o.show=!0,o.shown=!0,Object.assign(n,o)):(this.alerts.push(o),this.$nextTick((function(){o.show=!0,o.shown=!0}))),"error"===r&&a instanceof Error)&&console.error("%c".concat(this.$projectName,"%cv").concat(this.$projectVersion,"%c ").concat(null!==(t=a.stack)&&void 0!==t?t:a),"border-radius: 4px 0 0 4px;color:#fff;background:#424242; padding: 0 4px","color:white;background:#01579B;border-radius: 0 4px 4px 0;padding: 0 4px","")}}]),r}(b["e"]);ve=Object(h["a"])([Object(b["a"])({components:{Add:F,TextAdd:z,Downloading:ae,AnimeList:pe}})],ve);var he=ve,be=he,fe=r("7496"),me=r("40dc"),ge=r("a523"),xe=r("f6c4"),ke=r("8dd9"),je=r("2db4"),Oe=r("71a3"),ye=r("c671"),we=r("fe57"),Te=r("aac8"),_e=Object(y["a"])(be,n,o,!1,null,null,null),Se=_e.exports;T()(_e,{VApp:fe["a"],VAppBar:me["a"],VContainer:ge["a"],VIcon:Z["a"],VMain:xe["a"],VRow:R["a"],VSheet:ke["a"],VSnackbar:je["a"],VTab:Oe["a"],VTabItem:ye["a"],VTabs:we["a"],VTabsItems:Te["a"],VTextField:L["a"]});var Ce=r("f309"),Ve=r("25a2");r("d4b8"),r("5363");a["default"].use(Ce["a"]);var Re=new Ce["a"]({theme:{dark:!0},lang:{locales:{zhHans:Ve["a"]},current:"zhHans"}}),Pe=r("9224");a["default"].config.productionTip=!1,a["default"].prototype.$projectName=Pe.name.replace(/^./,(function(e){return e.toUpperCase()})),a["default"].prototype.$projectVersion=Pe.version,a["default"].config.productionTip=!1,new a["default"]({vuetify:Re,render:function(e){return e(Se)}}).$mount("#app")}});